## Purpose:
The code in this repo uses Terraform to deploy a nginx webserver on an Ubuntu instance behind a load balancer with an autoscaling group in AWS.

## Variables:
Update default variables in terraform.tfvars before running.

### aws_region
AWS region is set with the aws_region variable, current options available us-east-1, us-west-2, ca-central-1 (matches AMI regions)<br/>
_Replacement is optional_

### aws_profile
Picks up AWS credentials for the profile specified, requires a user with full access to EC2 and S3. Default is "terraform"<br/>
**Replacement is required**

### aws_vpc_identifier, aws_subnet_1, aws_subnet_2
VPC and subnets should be set up in advance and can be specified with aws_vpc_identifier, aws_subnet_1 and aws_subnet_2 respectively.<br/>
Not currently available in the code but can be added is an option for third subnet if applicable/desired.<br/>
**Replacement is required**

### aws_amis
Defaults to map of AMIs to regions for latest Ubuntu 18.04 AMI for ca-central-1, us-east-1 and us-west-2<br/>
_Replacement is optional_

## Assumptions:

Access to AWS is set up and user has full access to EC2, S3<br/>
Terraform state stored in S3 bucket, bucket name key and bucket region are hardcoded and need to be replaced before running. S3 bucket should be accessible by the user defined in the AWS credentials profile<br/>
VPC and subnets set up in advance and are not created by Terraform

## Run:
### Setup
Update default variables in [terraform.tfvars](./terraform.tfvars) and S3 bucket config in [main.tf](./main.tf) before running:<br/>
`terraform init`
<br/>See [Variables](#Variables) section for required/optional replacement.

### Preview
Confirm default variables updated in [terraform.tfvars](./terraform.tfvars) and S3 bucket config in [main.tf](./main.tf) before running:<br/>
`terraform plan`
<br/>See [Variables](#Variables) section for required/optional replacement.

### Run
Confirm default variables updated in [terraform.tfvars](./terraform.tfvars) and S3 bucket config in [main.tf](./main.tf) before running:<br/>
`terraform apply`
<br/>Add `-auto-approve` to remove the interactive approval requirement
<br/>See [Variables](#Variables) section for required/optional replacement.

### Remove all resources generated by current state
`terraform destroy`